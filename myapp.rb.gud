require 'sinatra'
require 'json'

get '/' do
  "CopperEgg Webhook Handler Example"
end
 
post '/' do
  alert = Hash.new
  alert = JSON::parse(request.body.read)
  puts
  alert.each do |key,value|
    if key.to_s == "details"
      d = Array.new(alert["details"])
      puts "details array : "
      d.each_index { |i| puts "\t" + d[i][0].to_s + " = " + d[i][1].to_s }
    else
      puts  key.to_s + " = " + value.to_s
    end
  end  
  status 201
end



